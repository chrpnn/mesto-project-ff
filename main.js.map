{"version":3,"file":"main.js","mappings":"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","sources":["webpack:///./src/components/modal.js","webpack:///./src/components/api.js","webpack:///./src/components/card.js","webpack:///./src/components/validation.js","webpack:///./src/index.js"],"sourcesContent":["// открытие попапа\r\nexport function openPopup(popupElement) {\r\n  popupElement.classList.add(\"popup_is-opened\");\r\n  document.addEventListener(\"keydown\", closeByEsc);\r\n  document.addEventListener(\"click\", closeByClickOverlay);\r\n}\r\n\r\n// закрытие попапа\r\nexport function closePopup(popupElement) {\r\n  popupElement.classList.remove(\"popup_is-opened\");\r\n  document.removeEventListener(\"keydown\", closeByEsc);\r\n  document.removeEventListener(\"click\", closeByClickOverlay);\r\n}\r\n\r\n// закрытие попапа по esc\r\nconst closeByEsc = (evt) => {\r\n  if (evt.key === \"Escape\") {\r\n    const openedPopup = document.querySelector(\".popup_is-opened\");\r\n    closePopup(openedPopup);\r\n    }\r\n};\r\n\r\n// закрытие попапа по оверлею\r\nconst closeByClickOverlay = (evt) => {\r\n  if (evt.target.classList.contains(\"popup\")) {\r\n    closePopup(evt.target);\r\n  }\r\n};","export {\r\n    getUserInfo,\r\n    getCards,\r\n    updateUserProfile,\r\n    addNewCard,\r\n    deleteCardFromServer,\r\n    toggleLike,\r\n    updateUserAvatar,\r\n};\r\n\r\nconst config = {\r\n    baseUrl: \"https://nomoreparties.co/v1/wff-cohort-8\",\r\n    headers: {\r\n        authorization: \"18d55e3c-466f-4dfc-9dfd-6044169d9965\",\r\n        \"Content-Type\": \"application/json\",\r\n    },\r\n};\r\n\r\nconst fetchData = (url) => {\r\n    return fetch(url, {\r\n        headers: config.headers,\r\n    })\r\n        .then((response) => {\r\n            if (response.ok) {\r\n                return response.json();\r\n            } else {\r\n                return Promise.reject(response.status);\r\n            }\r\n        })\r\n        .catch((error) => {\r\n            console.log(error);\r\n        });\r\n};\r\n\r\nconst getUserInfo = () => {\r\n    return fetchData(`${config.baseUrl}/users/me`);\r\n};\r\n\r\nconst getCards = () => {\r\n    return fetchData(`${config.baseUrl}/cards`);\r\n};\r\n\r\nconst updateUserProfile = (updatedData) => {\r\n    return fetch(`${config.baseUrl}/users/me`, {\r\n        method: \"PATCH\",\r\n        headers: config.headers,\r\n        body: JSON.stringify(updatedData),\r\n    })\r\n        .then((response) => {\r\n            if (response.ok) {\r\n                console.log(response);\r\n                return response.json();\r\n            } else {\r\n                return Promise.reject(response.status);\r\n            }\r\n        })\r\n        .catch((error) => {\r\n            console.log(error);\r\n        });\r\n};\r\n\r\nconst addNewCard = (name, link) => {\r\n    return fetch(`${config.baseUrl}/cards`, {\r\n        method: \"POST\",\r\n        headers: config.headers,\r\n        body: JSON.stringify({\r\n            name,\r\n            link,\r\n        }),\r\n    })\r\n        .then((response) => {\r\n            if (response.ok) {\r\n                console.log(response);\r\n                return response.json();\r\n            } else {\r\n                return Promise.reject(response.status);\r\n            }\r\n        })\r\n        .catch((error) => {\r\n            console.log(error);\r\n        });\r\n};\r\n\r\nconst deleteCardFromServer = (cardId) => {\r\n    return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n        method: \"DELETE\",\r\n        headers: config.headers,\r\n    })\r\n        .then((response) => {\r\n            if (response.ok) {\r\n                return response.json();\r\n            } else {\r\n                return Promise.reject(response.status);\r\n            }\r\n        })\r\n        .catch((error) => {\r\n            console.log(error);\r\n        });\r\n};\r\n\r\nfunction toggleLike(cardId, isLiked) {\r\n    const method = isLiked ? \"DELETE\" : \"PUT\";\r\n    return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n        method: method,\r\n        headers: config.headers,\r\n    })\r\n        .then((response) => {\r\n            if (response.ok) {\r\n                return response.json();\r\n            } else {\r\n                return Promise.reject(response.status);\r\n            }\r\n        })\r\n        .catch((error) => {\r\n            console.log(error);\r\n        });\r\n}\r\n\r\nfunction updateUserAvatar(url) {\r\n    return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n        method: \"PATCH\",\r\n        headers: config.headers,\r\n        body: JSON.stringify({\r\n            avatar: url,\r\n        }),\r\n    })\r\n        .then((response) => {\r\n            if (response.ok) {\r\n                return response.json();\r\n            } else {\r\n                return Promise.reject(response.status);\r\n            }\r\n        })\r\n        .catch((error) => {\r\n            console.log(error);\r\n        });\r\n}\r\n","import { deleteCardFromServer, toggleLike } from \"./api\";\r\n\r\n// поиск шаблона карточки\r\nfunction getTemplate() {\r\n  const cardTemplate = document.getElementById(\"card-template\").content;\r\n  return cardTemplate.querySelector(\".places__item\");\r\n}\r\n\r\n// обновление количества лайков на карточке\r\nfunction updateLikeCount(card, likeCount) {\r\n  const likeCountElement = card.querySelector(\".card__like-count\");\r\n  likeCountElement.textContent = likeCount;\r\n}\r\n\r\n// функция для обновления состояния кнопки лайка\r\nfunction updateLikeButtonState(button, isLiked) {\r\n  if (!isLiked) {\r\n    button.classList.add(\"card__like-button_is-active\");\r\n  } else {\r\n    button.classList.remove(\"card__like-button_is-active\");\r\n  }\r\n}\r\n\r\nexport function createCard(cardData, deleteCard, openImage, isOwner) {\r\n  const card = getTemplate().cloneNode(true);\r\n  const cardImage = card.querySelector(\".card__image\");\r\n  // заполняем данные из массива\r\n  card.querySelector(\".card__title\").textContent = cardData.name;\r\n  cardImage.src = cardData.link;\r\n  cardImage.alt = cardData.name;\r\n  // устанавливаем количество лайков\r\n  const likeCount = cardData.likes.length;\r\n  const likeCountElement = card.querySelector(\".card__like-count\");\r\n  likeCountElement.textContent = likeCount;\r\n\r\n  // если пользователь является владельцем, добавляем иконку удаления\r\n  if (isOwner) {\r\n    const deleteButton = card.querySelector(\".card__delete-button\");\r\n    deleteButton.addEventListener(\"click\", () => {\r\n      deleteCardFromServer(cardData._id)\r\n        .then(() => {\r\n          deleteCard(card);\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n    });\r\n  } else {\r\n    // если пользователь не является владельцем карточки, скрываем иконку удаления\r\n    const deleteButton = card.querySelector(\".card__delete-button\");\r\n    deleteButton.style.display = \"none\";\r\n  }\r\n\r\n  // обработчик для лайка\r\n  const likeButton = card.querySelector(\".card__like-button\");\r\n  likeButton.addEventListener(\"click\", () => {\r\n    const isLiked = likeButton.classList.contains(\r\n      \"card__like-button_is-active\"\r\n    );\r\n    toggleLike(cardData._id, isLiked)\r\n      .then((updatedCardData) => {\r\n        // обновляем количество лайков и состояние кнопки лайка\r\n        updateLikeCount(card, updatedCardData.likes.length);\r\n        updateLikeButtonState(likeButton, isLiked);\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Ошибка при изменении состояния лайка:\", error);\r\n      });\r\n  });\r\n\r\n  // обработчик для открытия изображения\r\n  cardImage.addEventListener(\"click\", () => {\r\n    openImage(cardData);\r\n  });\r\n\r\n  return card;\r\n}\r\n\r\n// Функция для удаления карточки из DOM\r\nexport function deleteCard(card) {\r\n  card.remove();\r\n}\r\n\r\n// Функция для переключения состояния кнопки лайка\r\nexport function likeCard(likeButton) {\r\n  likeButton.classList.toggle(\"card__like-button_is-active\");\r\n}","export { enableValidation, clearValidation };\r\n\r\nconst hideInputError = (\r\n  errorElement,\r\n  inputElement,\r\n  errorActiveClass,\r\n  inputErrorClass\r\n) => {\r\n  errorElement.textContent = \"\";\r\n  inputElement.classList.remove(inputErrorClass);\r\n  errorElement.classList.remove(errorActiveClass);\r\n};\r\n\r\n// 4\r\nconst showInputError = (\r\n  errorElement,\r\n  inputElement,\r\n  errorActiveClass,\r\n  inputErrorClass\r\n) => {\r\n  errorElement.textContent = inputElement.validationMessage;\r\n  inputElement.classList.add(inputErrorClass);\r\n  errorElement.classList.add(errorActiveClass);\r\n};\r\n\r\n// 3\r\nconst checkInputValidity = (\r\n  formElement,\r\n  inputElement,\r\n  errorActiveClass,\r\n  inputErrorClass\r\n) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  if (!inputElement.validity.valid) {\r\n    //функция отображения сообщения об ошибке\r\n    showInputError(\r\n      errorElement,\r\n      inputElement,\r\n      errorActiveClass,\r\n      inputErrorClass\r\n    );\r\n  } else {\r\n    hideInputError(\r\n      errorElement,\r\n      inputElement,\r\n      errorActiveClass,\r\n      inputErrorClass\r\n    );\r\n  }\r\n};\r\n\r\n// 2\r\nconst setEvtListeners = (formElement, settingObj) => {\r\n  const inputList = Array.from(\r\n    formElement.querySelectorAll(settingObj.inputSelector)\r\n  );\r\n  inputList.forEach((inputElement) => {\r\n    inputElement.addEventListener(\"input\", () => {\r\n      checkInputValidity(\r\n        formElement,\r\n        inputElement,\r\n        settingObj.errorActiveClass,\r\n        settingObj.inputErrorClass\r\n      );\r\n\r\n      const submitButton = formElement.querySelector(\r\n        settingObj.submitButtonSelector\r\n      );\r\n      toggleButtonState(\r\n        inputList,\r\n        submitButton,\r\n        settingObj.inactiveButtonClass\r\n      );\r\n    });\r\n  });\r\n};\r\n\r\n// 1\r\nconst enableValidation = (settingObj) => {\r\n  const formList = Array.from(\r\n    document.querySelectorAll(settingObj.formSelector)\r\n  );\r\n  formList.forEach((formElement) => {\r\n    setEvtListeners(formElement, settingObj);\r\n  });\r\n};\r\n\r\n// 1-1\r\nconst clearValidation = (formElement, settingObj) => {\r\n  // Находим все элементы с классом, указанным в настройках валидации\r\n  const inputList = Array.from(\r\n    formElement.querySelectorAll(settingObj.inputSelector)\r\n  );\r\n  // Удаляем сообщения об ошибках и убираем классы ошибок у всех соответствующих элементов\r\n  inputList.forEach((inputElement) => {\r\n    const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n    hideInputError(\r\n      errorElement,\r\n      inputElement,\r\n      settingObj.errorActiveClass,\r\n      settingObj.inputErrorClass\r\n    );\r\n  });\r\n\r\n  // Находим кнопку отправки формы и делаем её неактивной\r\n  const submitButton = formElement.querySelector(\r\n    settingObj.submitButtonSelector\r\n  );\r\n\r\n  toggleButtonState(inputList, submitButton, settingObj.inactiveButtonClass);\r\n};\r\n\r\n// togglebutton\r\nconst toggleButtonState = (inputList, buttonElement, inactiveButtonClass) => {\r\n  // Если есть хотя бы один невалидный инпут\r\n  if (hasInvalidInput(inputList)) {\r\n    // сделай кнопку неактивной\r\n    buttonElement.disabled = true;\r\n    buttonElement.classList.add(inactiveButtonClass);\r\n  } else {\r\n    // иначе сделай кнопку активной\r\n    buttonElement.disabled = false;\r\n    buttonElement.classList.remove(inactiveButtonClass);\r\n  }\r\n};\r\n\r\nfunction hasInvalidInput(inputList) {\r\n  return (\r\n    inputList.some((inputElement) => !inputElement.validity.valid) ||\r\n    inputList.some((inputElement) => inputElement.value === \"\")\r\n  );\r\n}\r\n","import \"./pages/index.css\";\r\nimport { openPopup, closePopup } from \"./components/modal.js\";\r\nimport { deleteCard, createCard, likeCard } from \"./components/card.js\";\r\nimport { enableValidation, clearValidation } from \"./components/validation.js\";\r\nimport {\r\n  getUserInfo,\r\n  getCards,\r\n  updateUserProfile,\r\n  addNewCard,\r\n  updateUserAvatar,\r\n} from \"./components/api.js\";\r\n\r\n\r\n// Получение DOM элементов\r\nconst editPopup = document.querySelector(\".popup_type_edit\");\r\nconst addPopup = document.querySelector(\".popup_type_new-card\");\r\nconst imagePopup = document.querySelector(\".popup_type_image\");\r\nconst editProfileAvatarPopup = document.querySelector(\".popup_type_avatar-edit\");\r\nconst placesList = document.querySelector(\".places__list\");\r\nconst editButton = document.querySelector(\".profile__edit-button\");\r\nconst profileName = document.querySelector(\".profile__title\");\r\nconst profileDescription = document.querySelector(\".profile__description\");\r\nconst addButton = document.querySelector(\".profile__add-button\");\r\nconst editProfileAvatarButton = document.querySelector(\".profile__image\");\r\nconst image = imagePopup.querySelector(\".popup__image\");\r\nconst caption = imagePopup.querySelector(\".popup__caption\");\r\nconst buttonClosePopupProfile = editPopup.querySelector(\".popup__close\");\r\nconst buttonClosePopupAdd = addPopup.querySelector(\".popup__close\");\r\nconst buttonClosePopupImage = imagePopup.querySelector(\".popup__close\");\r\nconst buttonClosePopupAvatar = editProfileAvatarPopup.querySelector(\".popup__close\");\r\n\r\n// попап редактирование профиля\r\neditButton.addEventListener(\"click\", function () {\r\n  nameInput.value = profileName.textContent;\r\n  jobInput.value = profileDescription.textContent;\r\n  openPopup(editPopup);\r\n  clearValidation(editPopup, validationObj);\r\n});\r\nbuttonClosePopupProfile.addEventListener(\"click\", function () {\r\n  closePopup(editPopup);\r\n});\r\n\r\n// попап добавление новых карточек\r\naddButton.addEventListener(\"click\", function () {\r\n  openPopup(addPopup);\r\n  clearValidation(addPopup, validationObj);\r\n});\r\nbuttonClosePopupAdd.addEventListener(\"click\", function () {\r\n  closePopup(addPopup);\r\n});\r\n\r\n// попап смена аватарки\r\neditProfileAvatarButton.addEventListener(\"click\", function () {\r\n  openPopup(editProfileAvatarPopup);\r\n  clearValidation(editProfileAvatarPopup, validationObj);\r\n});\r\nbuttonClosePopupAvatar.addEventListener(\"click\", function () {\r\n  closePopup(editProfileAvatarPopup);\r\n});\r\n\r\n// открытие изображения карточки\r\nfunction openImage(cardData) {\r\n  // заполняем изображение и описание в модальном окне данными из карточки\r\n  image.src = cardData.link;\r\n  image.alt = cardData.name;\r\n  caption.textContent = cardData.name;\r\n  openPopup(imagePopup);\r\n}\r\nbuttonClosePopupImage.addEventListener(\"click\", function () {\r\n  closePopup(imagePopup);\r\n});\r\n\r\n// редактирование имени и информации о себе, находим форму и поля формы для редактирования профиля\r\nconst formPopupEdit = document.querySelector(\".popup_type_edit\");\r\nconst nameInput = formPopupEdit.querySelector(\".popup__input_type_name\");\r\nconst jobInput = formPopupEdit.querySelector(\".popup__input_type_description\");\r\n\r\n// объявляем переменную для хранения состояния загрузки\r\nlet isLoading = false;\r\n\r\n// функция для отображения состояния загрузки\r\nfunction renderLoading(isLoading, button) {\r\n  \r\n  if (isLoading) {\r\n    button.textContent = \"Сохранение...\";\r\n    button.setAttribute(\"disabled\", true);\r\n  } else {\r\n    button.textContent = \"Сохранить\";\r\n    button.removeAttribute(\"disabled\");\r\n  }\r\n}\r\n\r\n// функция для обработки события отправки формы редактирования профиля\r\nfunction handleSubmitProfileForm(evt) {\r\n  evt.preventDefault();\r\n  isLoading = true;\r\n  renderLoading(true, editPopup.querySelector(\".popup__button\"));\r\n  // отмена стандартной отправки формы\r\n  const updatedProfileData = {\r\n    name: nameInput.value,\r\n    about: jobInput.value,\r\n  };\r\n  updateUserProfile(updatedProfileData)\r\n    .then((updatedData) => {\r\n      // обновляем текстовые элементы\r\n      profileName.textContent = updatedProfileData.name;\r\n      profileDescription.textContent = updatedProfileData.about;\r\n      closePopup(editPopup);\r\n      console.log(\"Данные профиля успешно обновлены:\", updatedData);\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"Ошибка при обновлении данных профиля:\", error);\r\n    })\r\n    .finally(() => {\r\n      isLoading = false;\r\n      renderLoading(false, editPopup.querySelector(\".popup__button\"));\r\n    });\r\n}\r\n\r\n// Прикрепляем обработчик к форме:\r\n// он будет следить за событием “submit” - «отправка»\r\nformPopupEdit.addEventListener(\"submit\", handleSubmitProfileForm);\r\n\r\n// добавление новой карточки, находим поля формы в DOM\r\nconst placeNameInput = addPopup.querySelector(\".popup__input_type_card-name\");\r\nconst linkInput = addPopup.querySelector(\".popup__input_type_url\");\r\n\r\n// обработчик отправки формы для добавления карточки\r\nfunction handleSubmitAddForm(evt) {\r\n  evt.preventDefault();\r\n  isLoading = true;\r\n  renderLoading(isLoading, addPopup.querySelector(\".popup__button\"));\r\n  const placeNameValue = placeNameInput.value;\r\n  const linkValue = linkInput.value;\r\n  addNewCard(placeNameValue, linkValue)\r\n    .then((updatedData) => {\r\n      // создание новуй карточки и добавление её в начало\r\n      const newCard = createCard(\r\n        updatedData,\r\n        deleteCard,\r\n        openImage,\r\n        true\r\n      );\r\n      placesList.prepend(newCard);\r\n      // очищаем форму\r\n      placeNameInput.value = \"\";\r\n      linkInput.value = \"\";\r\n      closePopup(addPopup);\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"Ошибка при обновлении данных профиля:\", error);\r\n    })\r\n    .finally(() => {\r\n      isLoading = false;\r\n      renderLoading(isLoading, addPopup.querySelector(\".popup__button\"));\r\n    });\r\n}\r\n\r\n// прикрепляем обработчик к форме добавления карточки\r\naddPopup.addEventListener(\"submit\", handleSubmitAddForm);\r\n\r\n// объект с настройками валидации форм\r\nconst validationObj = {\r\n  formSelector: \".popup__form\",\r\n  inputSelector: \".popup__input\",\r\n  submitButtonSelector: \".popup__button\",\r\n  inactiveButtonClass: \"popup__button_disabled\",\r\n  inputErrorClass: \"popup__input_type_error\",\r\n  errorClass: \"popup__error_visible\",\r\n};\r\n\r\n// включаем валидацию для всех форм\r\nenableValidation(validationObj);\r\n\r\n\r\n// получаем информацию о пользователе и карточках с сервера\r\nPromise.all([getUserInfo(), getCards()])\r\n  .then((results) => {\r\n    const [userData, cardsData] = results;\r\n    // обновляем профиль пользователя\r\n    profileName.textContent = userData.name;\r\n    profileDescription.textContent = userData.about;\r\n    editProfileAvatarButton.style.backgroundImage = `url(${userData.avatar})`;\r\n\r\n    cardsData.forEach((cardData) => {\r\n      // Создание и добавление карточки на страницу\r\n      const isOwner = cardData.owner._id === userData._id;\r\n      const newCard = createCard(\r\n        cardData,\r\n        deleteCard,\r\n        openImage,\r\n        isOwner\r\n      );\r\n      placesList.appendChild(newCard);\r\n    });\r\n  })\r\n  .catch((error) => {\r\n    console.log(\"Ошибка при загрузке данных с сервера:\", error);\r\n  });\r\n\r\n// смена аватарки профиля\r\nfunction handleEditUserAvatar(evt) {\r\n  evt.preventDefault();\r\n  isLoading = true;\r\n  renderLoading(isLoading, editProfileAvatarPopup.querySelector(\".popup__button\"));\r\n  const avatarUrlInput = editProfileAvatarPopup.querySelector(\r\n    \".popup__input_type_edit-avatar\"\r\n  );\r\n  const avatarUrl = avatarUrlInput.form.link.value;\r\n  updateUserAvatar(avatarUrl)\r\n    .then((data) => {\r\n      // в случае успешного изменения аватара, обновляем его на странице и закрываем форму\r\n      editProfileAvatarButton.style.backgroundImage = `url(${data.avatar})`;\r\n      console.log(editProfileAvatarButton.style.backgroundImage);\r\n      closePopup(editProfileAvatarPopup);\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Ошибка при обновлении аватара:\", error);\r\n    })\r\n    .finally(() => {\r\n      isLoading = false;\r\n      renderLoading(isLoading, editProfileAvatarPopup.querySelector(\".popup__button\"));\r\n    });\r\n}\r\n\r\neditProfileAvatarPopup.addEventListener(\"submit\", handleEditUserAvatar);"],"names":["openPopup","popupElement","classList","add","document","addEventListener","closeByEsc","closeByClickOverlay","closePopup","remove","removeEventListener","evt","key","querySelector","target","contains","config","baseUrl","headers","authorization","fetchData","url","fetch","then","response","ok","json","Promise","reject","status","catch","error","console","log","createCard","cardData","deleteCard","openImage","isOwner","card","getElementById","content","cloneNode","cardImage","textContent","name","src","link","alt","likeCount","likes","length","cardId","_id","concat","method","style","display","likeButton","isLiked","toggleLike","updatedCardData","updateLikeCount","button","updateLikeButtonState","hideInputError","errorElement","inputElement","errorActiveClass","inputErrorClass","clearValidation","formElement","settingObj","inputList","Array","from","querySelectorAll","inputSelector","forEach","id","submitButton","submitButtonSelector","toggleButtonState","inactiveButtonClass","buttonElement","some","validity","valid","value","hasInvalidInput","disabled","editPopup","addPopup","imagePopup","editProfileAvatarPopup","placesList","editButton","profileName","profileDescription","addButton","editProfileAvatarButton","image","caption","buttonClosePopupProfile","buttonClosePopupAdd","buttonClosePopupImage","buttonClosePopupAvatar","nameInput","jobInput","validationObj","formPopupEdit","renderLoading","isLoading","setAttribute","removeAttribute","preventDefault","updatedData","updatedProfileData","about","body","JSON","stringify","finally","placeNameInput","linkInput","newCard","prepend","formSelector","errorClass","validationMessage","showInputError","checkInputValidity","setEvtListeners","all","results","_results","userData","cardsData","backgroundImage","avatar","owner","appendChild","form","data"],"sourceRoot":""}